<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Open This When You Miss Me</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #fffaf0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .card {
      perspective: 1000px;
      cursor: pointer;
      width: 320px;
      max-width: 92%;
    }
    .card-inner {
      position: relative;
      width: 100%;
      padding-top: 150%;
      transition: transform 0.8s;
      transform-style: preserve-3d;
    }
    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }

    .card-front, .card-back {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      backface-visibility: hidden;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 22px;
      text-align: center;
      word-break: break-word;
      overflow: hidden;
    }

    .card-front {
      background: #FFD700;
      font-size: 1.2em;
      font-weight: bold;
    }

    .card-back {
      background: white;
      transform: rotateY(180deg);
      font-size: 1em;
      line-height: 1.45;
      text-align: left;
      white-space: pre-wrap;
    }

    p.none {
      font-size: 1.1em;
      color: #444;
    }
  </style>
</head>
<body>
  <div id="container"></div>

  <script>
   const letters = [
`Hi my pretty lil fuck... this is day 1...`,
"Day 2: Good morning princess...",
"Day 3: Good morning my love...",
`Hi my princess.. this is day 4...`,
`Good morning riri. I'm hella fucking late...`,    
`Hi beautiful. I fucking hated the past 2 days...`, 
`Hi princess! Good fucking morning. Just so you know you're fucking adorable when you sleep... One day im jst gonna spawn in your room. Fuck the distance i hate this shit why tf r u so far away. Oh also im terribly sorry for waking you up in the morning i didn't know i was unmuted. the best part about last night was when we both sorta woke up n smiled at each other. Please lock the fuck in today mf is busy my birthday week.. I love you. See you when you wake up baby.`,
`Hi riri. Iâ€™ve been sitting here thinking about how Iâ€™ve been with you lately and honestly I know I mess up a lot. Sometimes I donâ€™t communicate properly, sometimes I let my moods get the better of me and I hate that you end up feeling it from so far away. You deserve someone who shows up better than I do and Iâ€™m trying to get there, even if it doesnâ€™t look like it right now. Please donâ€™t ever think I take you for granted... I donâ€™t. Youâ€™re the best thing in my life and I donâ€™t want to lose that. I love you.`,

   ];

    // Start date = September 22, 2025
    const startYear = 2025, startMonth = 9, startDay = 22;

    function getDublinYMD() {
      const now = new Date();
      const parts = new Intl.DateTimeFormat("en-GB", {
        timeZone: "Europe/Dublin",
        year: "numeric", month: "2-digit", day: "2-digit"
      }).formatToParts(now);
      const y = parseInt(parts.find(p=>p.type==="year").value,10);
      const m = parseInt(parts.find(p=>p.type==="month").value,10);
      const d = parseInt(parts.find(p=>p.type==="day").value,10);
      return {y,m,d};
    }

    function toUTCmidnight(y,m,d){
      return Date.UTC(y,m-1,d);
    }

    function renderCard() {
      const today = getDublinYMD();
      const todayUTC = toUTCmidnight(today.y, today.m, today.d);
      const startUTC = toUTCmidnight(startYear, startMonth, startDay);

      const diffDays = Math.floor((todayUTC - startUTC) / (1000*60*60*24)) + 1;
      const index = diffDays - 1;

      const container = document.getElementById("container");
      container.innerHTML = "";

      if (index >= 0) {
        const card = document.createElement("div");
        card.className = "card";
        const safeIndex = Math.min(index, letters.length - 1); // fallback to last letter
        card.innerHTML = `
          <div class="card-inner">
            <div class="card-front">Open this when you miss me</div>
            <div class="card-back">${letters[safeIndex]}</div>
          </div>
        `;
        card.addEventListener("click", () => {
          card.classList.toggle("flipped");
        });
        container.appendChild(card);
      } else {
        const p = document.createElement("p");
        p.className = "none";
        p.textContent = "No letter yet ðŸ’Œ";
        container.appendChild(p);
      }
    }

    renderCard();

    function msUntilMidnightDublin() {
      const t = getDublinYMD();
      const nextUTC = toUTCmidnight(t.y, t.m, t.d+1);
      return nextUTC - Date.now();
    }

    setTimeout(() => {
      renderCard();
      setInterval(renderCard, 24*60*60*1000);
    }, msUntilMidnightDublin());
  </script>
</body>
</html>


