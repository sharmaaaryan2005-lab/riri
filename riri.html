<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Open This When You Miss Me</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #fffaf0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .card {
      perspective: 1000px;
      cursor: pointer;
      width: 320px;
      max-width: 92%;
    }
    .card-inner {
      position: relative;
      width: 100%;
      padding-top: 150%;
      transition: transform 0.8s;
      transform-style: preserve-3d;
    }
    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }

    .card-front, .card-back {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      backface-visibility: hidden;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 22px;
      text-align: center;
      word-break: break-word;
      overflow: hidden;
    }

    .card-front {
      background: #FFD700;
      font-size: 1.2em;
      font-weight: bold;
    }

    .card-back {
      background: white;
      transform: rotateY(180deg);
      font-size: 1em;
      line-height: 1.45;
      text-align: left;
      white-space: pre-wrap;
    }

    p.none {
      font-size: 1.1em;
      color: #444;
    }
  </style>
</head>
<body>
  <div id="container"></div>

  <script>
    // Letters (you can extend this list anytime)
    const letters = [
`Hi my pretty lil fuck... this is day 1 of daily letters you get to see until I see you which should be now but thats fine. I just want to say I love you and have fun tonight baby... I miss you so much and I wish I was there with you princess.`,
      "Day 2: Good morning princess... wakey wakey. I'm still in college... ill be home late today. I love you so fucking much and I miss you like crazy. I wish I was there to wake you up and get you breakfast in bed. Time to lock in my love and show me how big of a smartypant you are. My smartypant.,
      "Day 3: (write day 3 here)"
    ];

    // Start date (Day 1) in Dublin
    const startYear = 2025, startMonth = 9, startDay = 22;

    // Get today's date parts in Dublin
    function getDublinYMD() {
      const now = new Date();
      const parts = new Intl.DateTimeFormat("en-GB", {
        timeZone: "Europe/Dublin",
        year: "numeric", month: "2-digit", day: "2-digit"
      }).formatToParts(now);
      const y = parseInt(parts.find(p=>p.type==="year").value,10);
      const m = parseInt(parts.find(p=>p.type==="month").value,10);
      const d = parseInt(parts.find(p=>p.type==="day").value,10);
      return {y,m,d};
    }

    // Convert YMD â†’ UTC midnight for safe diff
    function toUTCmidnight(y,m,d){
      return Date.UTC(y,m-1,d);
    }

    function renderCard() {
      const today = getDublinYMD();
      const todayUTC = toUTCmidnight(today.y, today.m, today.d);
      const startUTC = toUTCmidnight(startYear, startMonth, startDay);

      // Day number: 1 on start date
      const diffDays = Math.floor((todayUTC - startUTC) / (1000*60*60*24)) + 1;
      const index = diffDays - 1;

      const container = document.getElementById("container");
      container.innerHTML = "";

      if (index >= 0 && index < letters.length) {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <div class="card-inner">
            <div class="card-front">Open this when you miss me</div>
            <div class="card-back">${letters[index]}</div>
          </div>
        `;
        card.addEventListener("click", () => {
          card.classList.toggle("flipped");
        });
        container.appendChild(card);
      } else {
        const p = document.createElement("p");
        p.className = "none";
        p.textContent = "No letter for today ðŸ’Œ";
        container.appendChild(p);
      }
    }

    renderCard();

    // Refresh at next Dublin midnight
    function msUntilMidnightDublin() {
      const t = getDublinYMD();
      const nextUTC = toUTCmidnight(t.y, t.m, t.d+1);
      return nextUTC - Date.now();
    }

    setTimeout(() => {
      renderCard();
      setInterval(renderCard, 24*60*60*1000);
    }, msUntilMidnightDublin());
  </script>
</body>
</html>

